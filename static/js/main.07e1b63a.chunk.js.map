{"version":3,"sources":["components/Modal/Modal.module.css","components/Button/Button.module.css","components/ImageGallery/ImageGallery.module.css","components/ImageGalleryItem/ImageGalleryItem.module.css","components/Loader/Loader.module.css","components/Searchbar/Searchbar.module.css","components/Searchbar/Searchbar.jsx","components/Modal/Modal.jsx","components/ImageGalleryItem/ImageGalleryItem.jsx","components/ImageGallery/ImageGallery.jsx","components/Button/Button.jsx","components/Loader/Loader.jsx","js/scrollPageDown.js","components/App/App.js","Api/fetchApi.js","index.js"],"names":["module","exports","Searchbar","state","searchRequest","onChangeInput","e","setState","currentTarget","value","onSearchSubmit","event","preventDefault","props","onSubmit","toast","error","className","s","this","SearchForm","type","SearchForm__button","SearchForm__button__label","SearchForm__input","autoComplete","autoFocus","placeholder","onChange","Component","modalRoot","document","querySelector","Modal","onClose","children","useEffect","window","addEventListener","handleKeyDown","handleClose","removeEventListener","code","createPortal","Overlay","onClick","target","ImageGalleryItem","setCurrentPicture","images","handleClick","dataset","largeimage","alt","map","item","src","webformatURL","tags","ImageGalleryItem__image","largeImageURL","shortid","generate","ImageGallery","Button","containerBtn__loadMore","Load","color","height","width","timeout","loader","scrollPageDown","scrollTo","top","documentElement","scrollHeight","behavior","App","useState","showModal","setShowModal","pictures","setPictures","setSearchRequest","loading","setLoading","page","setPage","largeImageSrc","setLargeImageSrc","setAlt","getData","console","log","Date","now","isFirstRun","useRef","useLayoutEffect","current","request","q","axios","get","GetImagesApi","then","response","status","trim","length","data","hits","Error","message","catch","finally","autoClose","newestOnTop","undefined","ReactDOM","render","StrictMode","getElementById"],"mappings":"wIACAA,EAAOC,QAAU,CAAC,QAAU,uBAAuB,MAAQ,uB,mBCA3DD,EAAOC,QAAU,CAAC,OAAS,uBAAuB,uBAAyB,yC,mBCA3ED,EAAOC,QAAU,CAAC,aAAe,qC,mBCAjCD,EAAOC,QAAU,CAAC,iBAAmB,2CAA2C,wBAA0B,oD,mBCA1GD,EAAOC,QAAU,CAAC,OAAS,yB,iFCA3BD,EAAOC,QAAU,CAAC,UAAY,6BAA6B,WAAa,8BAA8B,mBAAqB,sCAAsC,0BAA4B,6CAA6C,kBAAoB,uC,uLCOxPC,E,4MACJC,MAAQ,CACNC,cAAe,I,EAGjBC,cAAgB,SAAAC,GACd,EAAKC,SAAS,CAAEH,cAAeE,EAAEE,cAAcC,S,EAGjDC,eAAiB,SAAAC,GACfA,EAAMC,iBAED,EAAKT,MAAMC,eAKhB,EAAKG,SAAS,CAAEH,cAAe,KAE/B,EAAKS,MAAMC,SAAS,EAAKX,MAAMC,gBAN7BW,IAAMC,MAAM,0B,4CAShB,WACE,OACE,wBAAQC,UAAWC,IAAEhB,UAArB,SACE,uBAAMY,SAAUK,KAAKT,eAAgBO,UAAWC,IAAEE,WAAlD,UACE,wBAAQC,KAAK,SAASJ,UAAWC,IAAEI,mBAAnC,SACE,sBAAML,UAAWC,IAAEK,0BAAnB,sBAGF,uBACEN,UAAWC,IAAEM,kBACbH,KAAK,OACLI,aAAa,MACbC,WAAS,EACTC,YAAY,2BACZC,SAAUT,KAAKd,cACfI,MAAOU,KAAKhB,MAAMC,yB,GArCNyB,a,iBCHlBC,EAAYC,SAASC,cAAc,eACnCC,EAAQ,SAAC,GAA2B,IAAzBC,EAAwB,EAAxBA,QAASC,EAAe,EAAfA,SACxBC,qBAAU,WACRC,OAAOC,iBAAiB,UAAWC,KAClC,IAEH,IAAMC,EAAc,WAClBH,OAAOI,oBAAoB,UAAWF,GACtCL,KAGIK,EAAgB,SAAAjC,GACL,WAAXA,EAAEoC,MACJF,KAUJ,OAAOG,uBACL,qBAAK1B,UAAWC,IAAE0B,QAASC,QAPD,SAAAlC,GACtBA,EAAMH,gBAAkBG,EAAMmC,QAChCN,KAKF,SACE,qBAAKvB,UAAWC,IAAEe,MAAlB,SAA0BE,MAE5BL,I,mDC5BEiB,EAAmB,SAAC,GAAmC,IAAjCC,EAAgC,EAAhCA,kBAAmBC,EAAa,EAAbA,OACvCC,EAAc,SAAA5C,GAAC,OACnB0C,EAAkB1C,EAAEwC,OAAOK,QAAQC,WAAY9C,EAAEwC,OAAOO,MAE1D,OACE,mCACGJ,EAAOK,KAAI,SAAAC,GACV,OACE,oBACEV,QAASK,EACTjC,UAAU,mBAFZ,SAKE,qBACEuC,IAAKD,EAAKE,aACVJ,IAAKE,EAAKG,KACVzC,UAAWC,IAAEyC,wBACb,kBAAiBJ,EAAKK,iBANnBC,IAAQC,kBCVnBC,EAAe,SAAC,GAAmC,IAAjCd,EAAgC,EAAhCA,OAAQD,EAAwB,EAAxBA,kBAC9B,OACE,8BACE,oBAAI/B,UAAWC,IAAE6C,aAAjB,SACE,cAAC,EAAD,CACEf,kBAAmBA,EACnBC,OAAQA,S,iBCRlB,SAASe,EAAT,GAA8B,IAAZnB,EAAW,EAAXA,QAChB,OACE,qBAAK5B,UAAWC,IAAE+C,uBAAlB,SACE,wBAAQpB,QAASA,EAAS5B,UAAWC,IAAE8C,OAAvC,yB,2DCDAE,EAAO,WACX,OACE,cAAC,IAAD,CACE7C,KAAK,eACL8C,MAAM,UACNC,OAAQ,IACRC,MAAO,IACPC,QAAS,IACTrD,UAAWC,IAAEqD,UCbJ,SAASC,IACtBnC,OAAOoC,SAAS,CACdC,IAAK3C,SAAS4C,gBAAgBC,aAC9BC,SAAU,WCUC,SAASC,IAAO,IAAD,OAC5B,EAAkCC,oBAAS,GAA3C,mBAAOC,EAAP,KAAkBC,EAAlB,KACA,EAAgCF,mBAAS,IAAzC,mBAAOG,EAAP,KAAiBC,EAAjB,KACA,EAA0CJ,mBAAS,IAAnD,mBAAO3E,EAAP,KAAsBgF,EAAtB,KACA,EAA8BL,oBAAS,GAAvC,mBAAOM,EAAP,KAAgBC,EAAhB,KACA,EAAwBP,mBAAS,GAAjC,mBAAOQ,EAAP,KAAaC,EAAb,KACA,EAA0CT,mBAAS,IAAnD,mBAAOU,EAAP,KAAsBC,EAAtB,KACA,EAAsBX,mBAAS,IAA/B,mBAAO1B,EAAP,KAAYsC,EAAZ,KAEAvD,qBAAU,WACRwD,EAAQxF,EAAemF,EAAM,eAC5B,CAACnF,IACJgC,qBAAU,WACRwD,EAAQxF,EAAemF,EAAM,iBAC5B,CAACA,IACJnD,qBAAU,WACRyD,QAAQC,IAAI,qBAAuBC,KAAKC,OACxCb,EAAYD,KACX,CAACA,IACJ,IAAMe,EAAaC,kBAAO,GAC1BC,2BAAgB,WACVF,EAAWG,UACbH,EAAWG,SAAU,MAIzB,IAAMR,EAAU,SAACS,EAASd,EAAMzC,ICpClC,SAAsBwD,GAAc,IAAXf,EAAU,uDAAH,EAC9B,OAAOgB,IAAMC,IAAN,4EACgEF,EADhE,iBAC0Ef,EAD1E,mCDoCLkB,CAAaJ,EAASd,GACnBmB,MAAK,SAAAC,GAUJ,GATwB,MAApBA,EAASC,QAAkBxG,EAAcyG,OAAOC,SACnC,cAAXhE,GACFqC,EAAY,YAAIwB,EAASI,KAAKC,OAEjB,gBAAXlE,IACFqC,EAAY,GAAD,mBAAKD,GAAL,YAAkByB,EAASI,KAAKC,QAC3CxC,MAGoB,MAApBmC,EAASC,OACX,MAAM,IAAIK,MAAMN,EAASO,SAAW,yBAGvCR,MAAK,kBAAM,EAAKnG,SAAS,CAAE8E,SAAS,OACpC8B,OAAM,SAAUnG,GACf6E,QAAQ7E,MAAM,QAASA,MAExBoG,SAAQ,WACP5C,QAyBN,OACE,sBAAKvD,UAAU,MAAf,UACE,cAAC,IAAD,CAAgBoG,UAAW,IAAMC,aAAa,IAC9C,cAAC,EAAD,CAAWxG,SAzBU,SAAAuF,GACvBf,GAAW,GACXF,EAAiBiB,GACjBT,EAAQS,EAASd,MAuBM,IAApBL,EAAS4B,QACR,cAAC,EAAD,CACE9D,kBAbqB,SAACyC,EAAepC,GAC3C4B,GAAcD,QACQuC,IAAlB9B,IACFC,EAAiBD,GACjBE,EAAOtC,KAUHJ,OAAQiC,IAGXF,GACC,cAAC,EAAD,CAAO9C,QArBO,WAClB+C,GAAcD,IAoBV,SACE,qBAAKxB,IAAKiC,EAAepC,IAAKA,MAGjCgC,GAAW,cAAC,EAAD,IACXH,EAAS4B,OAAS,GACjB,qBAAK7F,UAAW,YAAhB,SACE,cAAC+C,EAAD,CAAQnB,QAnCM,WACpB2C,EAAQD,EAAO,GACfD,GAAW,GACXM,EAAQxF,EAAemF,EAAO,GAC9Bf,YElEJgD,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEF3F,SAAS4F,eAAe,W","file":"static/js/main.07e1b63a.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"Overlay\":\"Modal_Overlay__4NWzx\",\"Modal\":\"Modal_Modal__21y09\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Button\":\"Button_Button___7yau\",\"containerBtn__loadMore\":\"Button_containerBtn__loadMore__1DPz_\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGallery\":\"ImageGallery_ImageGallery__1S0f3\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGalleryItem\":\"ImageGalleryItem_ImageGalleryItem__1D_OG\",\"ImageGalleryItem__image\":\"ImageGalleryItem_ImageGalleryItem__image__1-6Js\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"loader\":\"Loader_loader__26KKk\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Searchbar\":\"Searchbar_Searchbar__365vp\",\"SearchForm\":\"Searchbar_SearchForm__3iEfl\",\"SearchForm__button\":\"Searchbar_SearchForm__button__3q5qg\",\"SearchForm__button__label\":\"Searchbar_SearchForm__button__label__39qLa\",\"SearchForm__input\":\"Searchbar_SearchForm__input__1gsiR\"};","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { toast } from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\n\r\n\r\nimport s from './Searchbar.module.css';\r\n\r\nclass Searchbar extends Component {\r\n  state = {\r\n    searchRequest: '',\r\n  };\r\n\r\n  onChangeInput = e => {\r\n    this.setState({ searchRequest: e.currentTarget.value });\r\n  };\r\n\r\n  onSearchSubmit = event => {\r\n    event.preventDefault();\r\n\r\n    if (!this.state.searchRequest) {\r\n      toast.error('Please, enter a name!');\r\n      // this.props.clearPage();\r\n      return;\r\n    }\r\n    this.setState({ searchRequest: '' });\r\n\r\n    this.props.onSubmit(this.state.searchRequest);\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <header className={s.Searchbar}>\r\n        <form onSubmit={this.onSearchSubmit} className={s.SearchForm}>\r\n          <button type=\"submit\" className={s.SearchForm__button}>\r\n            <span className={s.SearchForm__button__label}>Search</span>\r\n          </button>\r\n\r\n          <input\r\n            className={s.SearchForm__input}\r\n            type=\"text\"\r\n            autoComplete=\"off\"\r\n            autoFocus\r\n            placeholder=\"Search images and photos\"\r\n            onChange={this.onChangeInput}\r\n            value={this.state.searchRequest}\r\n          />\r\n        </form>\r\n      </header>\r\n    );\r\n  }\r\n}\r\n\r\nSearchbar.propTypes = {\r\n  onSubmit: PropTypes.func.isRequired,\r\n};\r\n\r\nexport { Searchbar };","import { useEffect } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { createPortal } from 'react-dom';\r\nimport s from './Modal.module.css';\r\n\r\nconst modalRoot = document.querySelector('#modal-root');\r\nconst Modal = ({ onClose, children }) => {\r\n  useEffect(() => {\r\n    window.addEventListener('keydown', handleKeyDown);\r\n  }, []);\r\n\r\n  const handleClose = () => {\r\n    window.removeEventListener('keydown', handleKeyDown);\r\n    onClose();\r\n  };\r\n\r\n  const handleKeyDown = e => {\r\n    if (e.code === 'Escape') {\r\n      handleClose();\r\n    }\r\n  };\r\n\r\n  const handleBackdropClick = event => {\r\n    if (event.currentTarget === event.target) {\r\n      handleClose();\r\n    }\r\n  };\r\n\r\n  return createPortal(\r\n    <div className={s.Overlay} onClick={handleBackdropClick}>\r\n      <div className={s.Modal}>{children}</div>\r\n    </div>,\r\n    modalRoot,\r\n  );\r\n};\r\n\r\nModal.propTypes = {\r\n  onClose: PropTypes.func.isRequired,\r\n};\r\n\r\nexport { Modal };\r\n","import PropTypes from 'prop-types';\nimport shortid from 'shortid';\nimport s from './ImageGalleryItem.module.css';\n\nconst ImageGalleryItem = ({ setCurrentPicture, images }) => {\n  const handleClick = e =>\n    setCurrentPicture(e.target.dataset.largeimage, e.target.alt);\n\n  return (\n    <>\n      {images.map(item => {\n        return (\n          <li\n            onClick={handleClick}\n            className=\"ImageGalleryItem\"\n            key={shortid.generate()}\n          >\n            <img\n              src={item.webformatURL}\n              alt={item.tags}\n              className={s.ImageGalleryItem__image}\n              data-largeimage={item.largeImageURL}\n            />\n          </li>\n        );\n      })}\n    </>\n  );\n};\n\nImageGalleryItem.propTypes = {\n  setCurrentPicture: PropTypes.func.isRequired,\n  images: PropTypes.arrayOf(PropTypes.shape).isRequired,\n};\n\nexport { ImageGalleryItem };\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport s from \"./ImageGallery.module.css\";\r\nimport { ImageGalleryItem } from \"../ImageGalleryItem/ImageGalleryItem\";\r\n\r\nconst ImageGallery = ({ images, setCurrentPicture }) => {\r\n  return (\r\n    <div>\r\n      <ul className={s.ImageGallery}>\r\n        <ImageGalleryItem\r\n          setCurrentPicture={setCurrentPicture}\r\n          images={images}\r\n        />\r\n      </ul>\r\n    </div>\r\n  );\r\n};\r\n\r\nImageGallery.propTypes = {\r\n  images: PropTypes.arrayOf(PropTypes.shape).isRequired,\r\n  setCurrentPicture: PropTypes.func.isRequired,\r\n};\r\n\r\nexport { ImageGallery };\r\n","import PropTypes from 'prop-types';\r\nimport s from './Button.module.css';\r\n\r\nfunction Button({ onClick }) {\r\n  return (\r\n    <div className={s.containerBtn__loadMore}>\r\n      <button onClick={onClick} className={s.Button}>\r\n        Load more\r\n      </button>\r\n    </div>\r\n  );\r\n}\r\n\r\nButton.propTypes = {\r\n  onClick: PropTypes.func,\r\n};\r\n\r\nexport { Button };\r\n","import React from \"react\";\r\nimport Loader from \"react-loader-spinner\";\r\n\r\nimport s from \"./Loader.module.css\";\r\n\r\nconst Load = () => {\r\n  return (\r\n    <Loader\r\n      type=\"MutatingDots\"\r\n      color=\"#00BFFF\"\r\n      height={100}\r\n      width={100}\r\n      timeout={500}\r\n      className={s.loader}\r\n    />\r\n  );\r\n};\r\n\r\nexport { Load };","export default function scrollPageDown() {\r\n  window.scrollTo({\r\n    top: document.documentElement.scrollHeight,\r\n    behavior: 'smooth',\r\n  });\r\n}","import './App.css';\nimport '../../styles/styles.css';\nimport { useState, useEffect, useRef, useLayoutEffect } from 'react';\nimport { Searchbar } from '../Searchbar/Searchbar.jsx';\nimport { Modal } from '../Modal/Modal.jsx';\nimport { ImageGallery } from '../ImageGallery/ImageGallery';\nimport { Button } from '../Button/Button.jsx';\nimport { GetImagesApi } from '../../Api/fetchApi';\nimport { Load } from '../Loader/Loader.jsx';\nimport scrollPageDown from '../../js/scrollPageDown';\n\nimport { ToastContainer } from 'react-toastify';\n\nexport default function App() {\n  const [showModal, setShowModal] = useState(false);\n  const [pictures, setPictures] = useState([]);\n  const [searchRequest, setSearchRequest] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [page, setPage] = useState(1);\n  const [largeImageSrc, setLargeImageSrc] = useState('');\n  const [alt, setAlt] = useState('');\n\n  useEffect(() => {\n    getData(searchRequest, page, 'searchBtn');\n  }, [searchRequest]);\n  useEffect(() => {\n    getData(searchRequest, page, 'loadMoreBtn');\n  }, [page]);\n  useEffect(() => {\n    console.log('starting useEffect' + Date.now());\n    setPictures(pictures);\n  }, [pictures]);\n  const isFirstRun = useRef(true);\n  useLayoutEffect(() => {\n    if (isFirstRun.current) {\n      isFirstRun.current = false;\n      return;\n    }\n  });\n  const getData = (request, page, target) => {\n    GetImagesApi(request, page)\n      .then(response => {\n        if (response.status === 200 && searchRequest.trim().length) {\n          if (target === 'searchBtn') {\n            setPictures([...response.data.hits]);\n          }\n          if (target === 'loadMoreBtn') {\n            setPictures([...pictures, ...response.data.hits]);\n            scrollPageDown();\n          }\n        }\n        if (response.status === 404) {\n          throw new Error(response.message || 'pictures not exist');\n        }\n      })\n      .then(() => this.setState({ loading: false }))\n      .catch(function (error) {\n        console.error('error', error);\n      })\n      .finally(() => {\n        scrollPageDown();\n      });\n  };\n  const handleFormSubmit = request => {\n    setLoading(true);\n    setSearchRequest(request);\n    getData(request, page);\n  };\n  const pageIncrement = () => {\n    setPage(page + 1);\n    setLoading(true);\n    getData(searchRequest, page + 1);\n    scrollPageDown();\n    return;\n  };\n  const toggleModal = () => {\n    setShowModal(!showModal);\n  };\n  const setCurrentPictureSrc = (largeImageSrc, alt) => {\n    setShowModal(!showModal);\n    if (largeImageSrc !== undefined) {\n      setLargeImageSrc(largeImageSrc);\n      setAlt(alt);\n    }\n  };\n  return (\n    <div className=\"App\">\n      <ToastContainer autoClose={2000} newestOnTop={true} />\n      <Searchbar onSubmit={handleFormSubmit} />\n      {pictures.length !== 0 && (\n        <ImageGallery\n          setCurrentPicture={setCurrentPictureSrc}\n          images={pictures}\n        />\n      )}\n      {showModal && (\n        <Modal onClose={toggleModal}>\n          <img src={largeImageSrc} alt={alt} />\n        </Modal>\n      )}\n      {loading && <Load />}\n      {pictures.length > 0 && (\n        <div className={'container'}>\n          <Button onClick={pageIncrement} />\n        </div>\n      )}\n    </div>\n  );\n}\n","import axios from 'axios';\r\n\r\n\r\nfunction GetImagesApi(q, page = 1) {\r\n  return axios.get(\r\n    `https://pixabay.com/api/?key=23477910-25b98db95ade589aa6935604b&q=${q}&page=${page}&per_page=12&image_type=photo`,\r\n  );\r\n}\r\n\r\nexport { GetImagesApi };","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App/App';\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}